{#
/**
 * @file
 * Theme override to display an Article node in teaser view mode.
 *
 * Available variables:
 * - node: The node entity.
 * - label: The title of the node.
 * - content: All node items.
 * - url: Direct URL of the current node.
 * - date: Themed creation date field.
 * - author_name: Themed author name field.
 * - view_mode: View mode (teaser).
 *
 * @see template_preprocess_node()
 */
#}
{%
  set classes = [
    'node',
    'node--type-' ~ node.bundle|clean_class,
    'node--view-mode-teaser',
    node.isPromoted() ? 'node--promoted',
    not node.isPublished() ? 'node--unpublished',
  ]
%}
{{ attach_library('lug/node') }}
<article{{ attributes.addClass(classes).addClass('bg-white rounded-lg overflow-hidden') }}>

  <div class="flex flex-col md:flex-row md:items-center gap-6">
    {# Main media image #}
    {% if content.field_main_media|render %}
      <div class="md:w-1/3 flex-shrink-0 md:ml-6">
        <div class="aspect-video overflow-hidden rounded-lg">
          {{ content.field_main_media }}
        </div>
      </div>
    {% endif %}

    <div class="flex-1 p-6">
    {# Category badge #}
    {% if node.field_category.entity %}
      {% set category = node.field_category.entity %}
      {% set category_url = '/articles/' ~ category.id() %}
      <div class="mb-3">
        <a href="{{ category_url }}" class="inline-flex items-center px-3 py-1 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-full transition-colors duration-200">
          {{ category.name.value }}
        </a>
      </div>
    {% endif %}

    {# Title #}
    {{ title_prefix }}
    {% if label %}
      <h2{{ title_attributes.addClass('text-2xl font-bold mb-3') }}>
        <a href="{{ url }}" class="text-gray-900 hover:text-blue-600 transition-colors duration-200" rel="bookmark">{{ label }}</a>
      </h2>
    {% endif %}
    {{ title_suffix }}

    {# Meta information #}
    {% if display_submitted %}
      <div class="flex items-center gap-4 text-sm text-gray-600 mb-4">
        {% if author_name %}
          <span class="flex items-center gap-1">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            {{ author_name }}
          </span>
        {% endif %}
        {% if date %}
          <span class="flex items-center gap-1">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            {{ date }}
          </span>
        {% endif %}
      </div>
    {% endif %}

    {# Body excerpt #}
    {% if content.body|render %}
      <div class="text-gray-700 mb-4 line-clamp-3">
        {{ content.body }}
      </div>
    {% endif %}

    {# Tags as pills #}
    {% if node.field_tags is not empty %}
      <div class="flex flex-wrap gap-2 mb-4">
        {% for tag in node.field_tags %}
          {% if tag.entity %}
            <span class="inline-flex items-center px-3 py-1 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200">
              {{ tag.entity.name.value }}
            </span>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}

    {# Read more button #}
    <div class="flex items-center justify-end">
      <a href="{{ url }}" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors duration-200">
        <span>Read more</span>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>

    </div>
  </div>

</article>
